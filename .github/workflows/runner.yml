name: Run notebooks on approval

on:
  pull_request_target:
    types: [labeled]
    branches: [develop]

  # Allow workflow to be dispatched on demand
  workflow_dispatch:
    inputs:
      ref:
        description: 'Git ref to development branch'
        required: false
        default: 'develop'

jobs:
  run-notebooks:
    if: github.event.label.name == 'ci:approved-to-run'
    runs-on: arc-runner-set
    steps:
    - uses: actions/checkout@v4
      with:
        repository: ${{ github.event.pull_request.head.repo.full_name }}
        ref: ${{ github.event.pull_request.head.sha }}
        persist-credentials: false
    - run: echo "ðŸŽ‰ This job uses runner scale set runners!"
